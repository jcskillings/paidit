<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paidit | Bills</title>
    <link rel="stylesheet" href="css/billaccounts.css" />
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/responsive-tables.css"/>
    <link rel="stylesheet" href="css/test.css"/>
    
    <script type="text/javascript" src="js/bills.js"></script>
    <script type="text/javascript" src="js/responsive-tables.js"></script>
    <link rel="shortcut icon" href="img/icon/checkMark.png"/>

    <script src="js/vendor/modernizr.js"></script>
  </head>
  <body onload="getBills()">
    
      
      <div class="icon-bar five-up">
        <a class="item" href="index.html">
          <img src="img/icon/homeIconG.png" height="20" width="20"  >
          <label class="show-for-medium-up">Home</label>
        </a>
        <a class="item" href="analysis.html">
          <img src="img/icon/chartsIconG.png" height="20" width="20">
          <label class="show-for-medium-up">Bill Analysis</label>
        </a>
        <a class="item" href="billaccounts.html" id="bills">
          <img src="img/icon/billIconG.png" height="20" width="20">
          <label class="show-for-medium-up"><b>Bills</b></label>
        </a>
        <a class="item" href="notificationslog.html">
          <img src="img/icon/smsIconG.png" height="20" width="20">
          <label class="show-for-medium-up">Notification Log</label>
        </a>
        <a class="item" href="usersettings.html">
          <img src="img/icon/gearIconG.png" height="20" width="20">
          <label class="show-for-medium-up">Settings</label>
        </a>
      </div>
   
    <div class="row">
      <a href="#" class='button radius' id='addBill' >Add Bill</a>
    </div>
    
    <div class="row">
      
      <div class="small-12 small-centered large-12 large-centered columns">
       
          
          <div class="large-1 columns">
          
          </div>
          <!-- BILL LIST -->
          <table class="small-11 large-11 columns" id="billTable">
            <thead  id="billTableHeader">
              <tr>
                <th>Bill</th>
                <th>Due On</th>
                <th>Amount</th>
                <th>Notifications</th>
                <th>Edit</th>
              </tr>
            </thead>
            <tbody >
              <tr>
                <td>Bill name</td>
                <td>1st of month</td>
                <td>$500.00</td>
                <!--<td ><img src="img/icon/emailIcon40px.png"/>
                <img src="img/icon/smsIcon40px.png"/>
                </td> -->
                <td>Email, SMS</td>
                <!-- <td class="editBox"><img src="img/icon/editIcon40px.png" /></td> -->
                
            </tbody>
          </table>
          
          <a href="#" class="button radius" id="saveBtn">Save</a>
          <a href="#" class="button radius" id="cancelBtn">Cancel</a>
      </div> 
        
        <div class="large-4 columns">
        </div>
      
      
    </div>
    

    <!-- -->
    
    <!-- -->
   
    
    
    
    
    
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    
    <script>
      $(document).foundation();
      
      function setCookie(cname,cvalue,exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        var expires = "expires=" + d.toGMTString();
        document.cookie = cname+"="+cvalue+"; "+expires;
      }
    </script>
    
    
    
    <script>
      //$('#dp1').fdatepicker();
    
      //var billsExist = true;
      var i = 0;
      // GET BILLS - Runs on pageload gets all bills stored in cookies ======
      function getBills() {
        //alert(document.cookie);
        for  (i=0; i < 100; i++){
          var bill = JSON.parse(getCookie("bill"+i));
          //alert("got bill " + i  + " = " +bill);
          if (bill === null || i > 1000){
            alert("no bills left");
            break;
          }
          else {
            alert("got bill " + i  + " = " + bill.name);
            
          }
        }
      }
      // appends individual bill to billTable
      function loadBill(bill){
        
      }
      
      // Gets a cookie by name
      function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i=0; i<ca.length; i++) {
          var c = ca[i];
          while (c.charAt(0)==' ') c = c.substring(1);
            if (c.indexOf(name) == 0) {
              return c.substring(name.length, c.length);
            }
          }
        return "";
      }
      
      // Bill object constructor
      function Bill(name, dueDate, amount, notifs ){
        this.name = name;
        this.dueDate = dueDate;
        this.amount = amount;
        this.notifs = notifs;

      } 
    
      $('#addBill').click(function(){
        $('#billTable').find('tbody').append($('<tr id="createBill">')
        .append($('<td><input type="text" placeholder="bill name" id="billname" required /></td>'))
        .append($('<td><input type="date" placeholder="due date" id="dueDate" /></td>'))
        .append($('<td><input type="text" placeholder="amount" id="amount"  /></td>'))
        .append($('<td><input id="emailCheckbox" type="checkbox"><label for="emailCheckbox">Email</label></td>'))
        .append($('<td><input id="smsCheckbox" type="checkbox"><label for="smsCheckbox">SMS</label></td>'))
        
        )
        $('#saveBtn').css('visibility','visible');
        $('#cancelBtn').css('visibility','visible');
        //alert("added bill");
        
        
      });
      
      $('#cancelBtn').click( function() {
          $('#createBill').remove();
          $('#saveBtn').css('visibility','hidden');
          $('#cancelBtn').css('visibility','hidden');
      });
      
      
   
      
      $('#saveBtn').click( function() {
        //alert("save bill");
        var notifs = ["none"];
        var name = document.getElementById("billname").value;
        alert(name);
        var dueDate =  document.getElementById("dueDate").value;
        alert(dueDate);
        var amount = document.getElementById("amount").value;
        var email = document.getElementById("emailCheckbox").value;
        alert(email);
        var sms = document.getElementById("smsCheckbox").value;
        if (email == "on") {
          notifs[0]="email";
        }
        if (sms == "on"){
          notifs.push("sms");
        }
        alert(notifs[0]);
        
        var newBill = new Bill(name, dueDate, amount, "none");
        alert(newBill.name + " " + newBill.dueDate);
        //alert(JSON.stringify(newBill));
        
        setCookie("bill0",(JSON.stringify(newBill)),30);
        return "";
      });
      
      function setCookie(cname,cvalue,exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        var expires = "expires=" + d.toGMTString();
        document.cookie = cname+"="+cvalue+"; "+expires;
      }
      
     
      
    </script>
    
    <!-- EDIT BILL -->
    
    
    
    
    </body>
</html>